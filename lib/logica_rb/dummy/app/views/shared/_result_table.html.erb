<% columns, rows =
  if result.respond_to?(:columns) && result.respond_to?(:rows)
    [result.columns, result.rows]
  elsif result.is_a?(Hash) && result["columns"] && result["rows"]
    [result["columns"], result["rows"]]
  else
    [[], []]
  end
%>

<p class="muted"><%= rows.length %> rows</p>

<div class="table-wrap">
  <table class="results">
    <thead>
      <tr>
        <% columns.each do |col| %>
          <th><%= col %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% rows.each do |row| %>
        <tr>
          <% row.each do |cell| %>
            <td><%= cell %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
